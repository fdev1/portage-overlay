--- a/vmnet-only/driver.c	2014-06-12 20:38:25.000000000 -0400
+++ b/vmnet-only/driver.c	2015-05-13 19:11:39.000000000 -0400
@@ -1236,8 +1236,8 @@
    struct inode *inode = NULL;
    long err;
 
-   if (filp && filp->f_dentry) {
-      inode = filp->f_dentry->d_inode;
+   if (filp && filp->f_path.dentry) {
+      inode = filp->f_path.dentry->d_inode;
    }
    err = VNetFileOpIoctl(inode, filp, iocmd, ioarg);
    return err;
